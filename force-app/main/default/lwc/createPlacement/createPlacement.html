<!--
@description       : 
@author            : Ali
@group             : 
@last modified on  : 12-18-2024
@last modified by  : Ali
-->
<template>
    <lightning-quick-action-panel header="">
        <div>     <!--section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open  "-->
     <div style="width: 100%; "> 
        <!--div class="slds-modal__container mycontainer"-->
            <!-- Custom Header -->
            <!--header class="slds-modal__header custom-modal-header" style="background:#08475b;color:white;">
                <lightning-button-icon icon-name="utility:close" alternative-text="Close" class="slds-modal__close" onclick={handleClose}></lightning-button-icon-->
                <!--h2  class="slds-text-heading_medium">{headerText}</h2-->
            <!--/header-->

            <!-- Modal Body Content -->
            <!--div class="slds-modal__content slds-p-around_medium"-->
                <lightning-card title="Select Candidate " icon-name="standard:buyer_group_qualifier">
                    <!-- Search Fields -->
                     <div class="slds-grid slds-wrap slds-gutters" style="padding-right:5px;padding-left:5px;">
                         <div class="slds-col slds-size_1-of-2" style="text-align: left; ">
                            <template if:true={longitude}> 
                                <div  class="mytbloc slds-p-around_medium">
                                   
                                   <table style="width:20%;border:1px;" class="slds-table slds-table_cell-buffer slds-table_bordered" aria-labelledby="element-with-table-label other-element-with-table-label">
                                       <thead>
                                         <tr class="slds-line-height_reset">
                                           <template if:true={zipcode}> 
                                           <th class="" scope="col"  >
                                               <div class="slds-truncate" title="zipcode">Zip-Code</div>
                                           </th>
                                           </template>
                                           <th class="" scope="col">
                                             <div class="slds-truncate" title="latitude">Latitude</div>
                                           </th>
                                           <th class="" scope="col">
                                             <div class="slds-truncate" title="longitude">Longitude</div>
                                           </th>
                                           </tr>
                                           </thead>
                                           <tbody>
                                               <tr class="slds-hint-parent">
                                                   <template if:true={zipcode}> 
                                                   <th data-label="zipcode" scope="row">
                                                   <div class="slds-truncate" title="zipcode">
                                                     <a href="#" tabindex="-1">{zipcode}</a>
                                                   </div></th>
                                                   </template>
           
                                                 <th data-label="latitude" scope="row">
                                                   <div class="slds-truncate" title="latitude">
                                                     <a href="#" tabindex="-1">{latitude}</a>
                                                   </div>
                                                 </th>
                                                 <th data-label="longitude" scope="row">
                                                   <div class="slds-truncate" title="longitude">
                                                     <a href="#" tabindex="-1">{longitude}</a>
                                                   </div>
                                                 </th>
                                                 </tr>
                                                 </tbody>
                                           </table>
                                    
                                    <!--lightning-map map-markers={mapMarkers} zoom-level={zoomLevel}> </lightning-map-->
                                </div><br><br></template>
                         </div>
                         <div class="slds-col slds-size_1-of-2" style="text-align: right; ">
                            <lightning-button   onclick={reloadPage} label="Refresh"></lightning-button> 
                         </div>
                      </div>
                      <!-- -->
                      <div class="slds-p-around_medium">
                      <lightning-record-view-form object-api-name="rightpm__Job_Orders__c"  record-id={recordId}>
                     
                        <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                            <thead>
                                <tr class="slds-text-title_caps">
                                    <th scope="col">
                                        <div class="slds-truncate" title="Position">Position</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="Start Date">Start Date</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="End Date">End Date</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="No. of Openings">No. of Openings</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="Filled">Filled</div>
                                    </th>
                                    <th scope="col">
                                        <div class="slds-truncate" title="Project">Project</div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                
                                    <tr  >
                                        <td>
                                            <div class="slds-truncate" title="position"><lightning-output-field field-name="rightpm__Position__c" variant="label-hidden"> </lightning-output-field></div>
                                        </td>
                                        <td>
                                            <div class="slds-truncate" title="Start Date"><lightning-output-field field-name="rightpm__StartDate__c" variant="label-hidden"> </lightning-output-field></div>
                                        </td>
                                        <td>
                                            <div class="slds-truncate" title="End Date"><lightning-output-field field-name="rightpm__EndDate__c" variant="label-hidden"> </lightning-output-field></div>
                                        </td>
                                        <td>
                                            <div class="slds-truncate" title="Openings"><lightning-output-field field-name="rightpm__ofOpening__c" variant="label-hidden"> </lightning-output-field></div>
                                        </td>
                                        <td>
                                            <div class="slds-truncate" title="filled"><lightning-output-field field-name="rightpm__Filled__c" variant="label-hidden"> </lightning-output-field></div>
                                        </td>
                                        <td>
                                            <div class="slds-truncate" title="project"><lightning-output-field field-name="rightpm__Project__c" variant="label-hidden"> </lightning-output-field></div>
                                        </td>
                                    </tr>
                                
                            </tbody>
                        </table>
                    </lightning-record-view-form>
                    </div>
                
                       
                      <!-- -->
                     
                    <div class="slds-p-around_medium">
                    
                        <div class="slds-grid slds-gutters">
                            <div class="slds-col ">
                                          <lightning-input class="myinputwidth" label="Name" placeholder=" Name.." onchange={handleNameChange}></lightning-input>
                               
                            </div>
                            <div class="slds-col ">
                                            <lightning-input class="myinputwidth" label="Position" placeholder="Position .." value={position} onchange={handlePositionChange}></lightning-input>
                                 
                              </div>
                            <div class="slds-col ">
                                          <!--lightning-input class="myinputwidth" label="State" placeholder="State Name.." value={searchAddress} onchange={handleAddressChange}></lightning-input-->
                                          <lightning-combobox 
                                                class="myinputwidth"
                                                label="State" 
                                                value={searchAddress}
                                                placeholder="Select a state" 
                                                options={Ustates} 
                                                onchange={handleAddressChange}
                                                >
                                            </lightning-combobox>
                               
                            </div>
                            <div class="slds-col ">
                                
                                    <lightning-input class="myinputwidth" label="Zip Code" minlength="5" maxlength="6"  pattern="[0-9\.]+" type="text" placeholder="Zip Code.." value={zipcode} onchange={handleZipCodeChange}></lightning-input>
                                    
                            </div>
                            <div class="slds-col ">
                                <!--input type="checkbox"  name="Geo" onchange={handleGeo}/-->
                                <!--template if:true={locationAvailable}-->
                                    <lightning-select name="Radius" label="Radius" onchange={handleGeoChange}
                                    value={selectedRadius}
                                    options={options}
                                    >
                                         
                                    </lightning-select>
                                <!--/template-->

                            </div>
                            <div class="slds-col " style="padding-top: 22px;">
                                          <lightning-button label="Search" data-id="mySearch"  onclick={handleSearch} class="slds-m-top_medium"></lightning-button>
                              
                            </div>
                            <div class="slds-col" style="padding-top: 22px;">
                                <span>            <lightning-button label="Add Candidate" onclick={handlepopup} class="slds-m-top_medium"></lightning-button>
                                </span>
                              </div>
                          </div>
                    
                    </div>
            
                    <!-- Contact Results Table -->
                    <template if:true={applications.length}>
                        <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                            <thead>
                                <tr>
                                    <th>  </th>
																		<th>Application</th>
                                    <th>Name</th>
                                    <th>Position</th>
                                    <th>Overall Stage</th> 
                                    <th>State</th>
                                    <!--th>Postal Code</th-->
                                </tr>
                            </thead>
                            <tbody><template if:true={isApp}>
                                <template for:each={paginatedData} for:item="app">
                                    <tr key={app.Id}>
                                        <td>
                                            <template if:true={app.Id}><lightning-input  type="checkbox" data-id={app.Id}   onchange={handleCheckboxChange}></lightning-input></template>
                                        </td>
																				<td>
                                                                                    <a href="javascript:void(0);" onclick={navigateToApp} data-id={app.Id}>
                                                                                        {app.Name}
                                                                                    </a>
                                                                                
                                                                                </td>
                                        <td>{app.HRMSUS__Candidate_Name__c}</td>
                                        <td>{app.rightpm__Position_Title_New__c}</td>
                                        <td>{app.HRMSUS__Overall_Stage__c}</td>
                                        <td title={app.HRMSUS__Candidate1__r.HRMSUS__Zip_Postal_Code__c}>
                                            {app.HRMSUS__Candidate1__r.HRMSUS__State__c}</td>
                                        <!--td>{app.HRMSUS__Candidate1__r.HRMSUS__State__c}</td-->
                                        <!--td>{app.MailingPostalCode}</td-->
                                    </tr>
                                </template></template>
                                
                            </tbody>
                        </table>
                    </template>
                    <div class="slds-m-top_medium pagination-controls">
                         
                        
                        <button class="slds-button slds-button_neutral" onclick={previousPage} disabled={isFirstPage}>Previous</button>
                        <span>Page {currentPage} of {totalPages}</span>
                        <button class="slds-button slds-button_neutral" onclick={nextPage} disabled={isLastPage}>Next</button>
                    </div>
            
                    <!-- Button to create placement records -->
                         <!--lightning-button label="Create Placements" onclick={createPlacements} class="slds-m-top_medium"></lightning-button-->
                 </lightning-card>
            <!--/div-->

            <!-- Custom Footer -->
            <!--footer class="slds-modal__footer custom-modal-footer" style="text-align: center;">
                <lightning-button label="Cancel" onclick={handleClose}></lightning-button>
                <span style="padding:10px;"></span>
                <lightning-button label="Create Placements" onclick={createPlacements} class="slds-m-top_medium"></lightning-button>
            </footer-->
        <!--/div-->
    <!--/section-->
    
    </div>
    
    <template if:true={isModalOpen}>
        <section class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <!-- Modal/Popup Header -->
                <header class="slds-modal__header" style="background:#2d5e7d;color:white;">
                    <!--lightning-button-icon icon-name="utility:close"
                                           alternative-text="Close"
                                           onclick={closeModal}></lightning-button-icon-->
                    <h2 class="slds-text-heading_medium">{header}</h2>
                </header>
    
                <!-- Modal/Popup Body -->
                <div class="slds-modal__content slds-p-around_medium" style="border: 1px solid lightblue;">
                    <div class="slds-grid slds-wrap slds-gutters">
                        <!-- First Name and Middle Name -->
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input label="First Name" required value={firstName} onchange={handleInputChange} data-id="firstName"></lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input label="Middle Name" value={middleName} onchange={handleInputChange} data-id="middleName"></lightning-input>
                        </div>
        
                        <!-- Last Name and Email -->
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input label="Last Name" required value={lastName} onchange={handleInputChange} data-id="lastName"></lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input label="Email" required type="email" value={email} onchange={handleInputChange} data-id="email"></lightning-input>
                        </div>
        
                        <!-- Primary Number and Address -->
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input label="Primary Number" required type="tel" value={primaryNumber} onchange={handleInputChange} data-id="primaryNumber"></lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input label="Address (Optional)" value={address1} onchange={handleInputChange} data-id="address1"></lightning-input>
                        </div>
        
                        <!-- Address 2 and City -->
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input label="Address 2 (Optional)" value={address2} onchange={handleInputChange} data-id="address2"></lightning-input>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input label="City (Optional)" value={city} onchange={handleInputChange} data-id="city"></lightning-input>
                        </div>
        
                        <!-- Country and State -->
                        <div class="slds-col slds-size_1-of-2">
                            <!--lightning-input label="Country (Optional)" value={country} onchange={handleInputChange} data-id="country"></lightning-input-->
                            <template if:true={countryOptions}>
                                <lightning-combobox 
                                    name="country" 
                                    label="Country" 
                                    value={country}
                                    placeholder="Select a Country" 
                                    options={countryOptions} 
                                    onchange={handleCountryChange}
                                    required
                                    data-id="country">
                                </lightning-combobox>
                                 
                            </template>
                            <template if:true={error}>
                                <p class="slds-text-color_error">Error: {error}</p>
                            </template>
                        </div>
                        <div class="slds-col slds-size_1-of-2">
                            <!--lightning-input label="State" required value={state} onchange={handleInputChange} data-id="state"></lightning-input-->
                            <!--lightning-select name="state" label="State" onchange={handleInputChange}
                                    value={state} data-id="state"
                                    options={Ustates}
                                    required >
                                         
                                    </lightning-select-->
                                    <lightning-combobox 
                                    name="state" 
                                    label="State" 
                                    value={state}
                                    placeholder="Select a state" 
                                    options={Ustates} 
                                    onchange={handleInputChange}
                                    required
                                    data-id="state">
                                </lightning-combobox>
                        
                        </div>
        
                        <!-- Postal Code -->
                        <div class="slds-col slds-size_1-of-2">
                            <lightning-input label="Postal Code" required type="text" value={postalCode} onchange={handleInputChange} data-id="postalCode"></lightning-input>
                        </div>
										
										<!--DOB-->
										<div class="slds-col slds-size_1-of-2">
                             <lightning-input label="Date Of Birth (Optional)" value={dob} onchange={handleInputChange} data-id="dob" type="Date"></lightning-input>
                        </div>
                    </div>
            
                        <!-- Submit Button -->
                        <!--lightning-button label="Submit" variant="brand" onclick={handleSubmit}></lightning-button-->
                     
                </div>
    
                <!-- Modal/Popup Footer -->
                <footer class="slds-modal__footer">
                    <lightning-button variant="neutral" label="Cancel" onclick={closeModal}></lightning-button>
                    <lightning-button variant="brand" data-id="myappli"  label="Save" onclick={handleSubmit}></lightning-button>
                </footer>
            </div>
        </section>
    
        <!-- Background Overlay -->
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</div>
    <div slot="footer" style="text-align:center;">
        <div style="text-align:center;">
            <lightning-button label="Cancel" onclick={handleClose}></lightning-button>
            <span style="padding:10px;"></span>
            <lightning-button label="Create Placements" data-id="myButton"  onclick={createPlacements} class="slds-m-top_medium"></lightning-button>
        </div>
    </div>




</lightning-quick-action-panel>
 </template>